import streamlit as st

# --- ãƒšãƒ¼ã‚¸è¨­å®š ---
st.set_page_config(
    page_title="My Research Tools",
    page_icon="ğŸ”¬",
    layout="wide"
)

st.title("ğŸ”¬ ç ”ç©¶ç”¨DXãƒ„ãƒ¼ãƒ«é›†")

st.markdown(
    """
    ### æ¦‚è¦
    å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®è§£æã‹ã‚‰äºˆæ¸¬ã¾ã§ã‚’ä¸€è²«ã—ã¦è¡Œã†ãŸã‚ã®çµ±åˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚
    """
)

# --- ãƒªãƒ³ã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ---
st.divider()
st.subheader("ğŸ“‚ åéŒ²ãƒ„ãƒ¼ãƒ«ä¸€è¦§")
st.page_link("pages/1_XPS_Analysis.py", label="1. XPS Analysis", icon="ğŸ“Š", help="F-DLCè†œã®C1sãƒ”ãƒ¼ã‚¯åˆ†é›¢ã¨çµ„æˆè§£æ")
st.page_link("pages/2_Contact_Angle.py", label="2. Contact Angle", icon="ğŸ’§", help="ç”»åƒå‡¦ç†ã«ã‚ˆã‚‹æ¥è§¦è§’æ¸¬å®š")
st.page_link("pages/3_Experiment_Prediction.py", label="3. Experiment Prediction", icon="ğŸ¤–", help="éå»ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãAIã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³")

st.divider()

# --- ã“ã“ã‹ã‚‰è¿½åŠ ï¼šã‚¬ã‚¹æµé‡è¨ˆç®—ãƒ„ãƒ¼ãƒ« ---
st.subheader("ğŸ§® ã‚¬ã‚¹æµé‡ è¨­å®šå€¤è¨ˆç®— (MFC)")
st.caption("å®Ÿæµé‡(sccm)ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼(CF)ã‚’è€ƒæ…®ã—ãŸè£…ç½®è¨­å®šå€¤ã‚’è¨ˆç®—ã—ã¾ã™ã€‚")

# ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã€æ ï¼ˆExpanderï¼‰ã«å…¥ã‚Œã¾ã™
with st.expander("è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã", expanded=True):
    
    # 1. å…¥åŠ› (st.number_input)
    # ãƒ¡ã‚¿ãƒ³ã®æµé‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ0ã€œ50ï¼‰
    a = st.number_input("ãƒ¡ã‚¿ãƒ³ (CH4) ã®å®Ÿæµé‡ [sccm]", min_value=0.0, max_value=50.0, value=10.0, step=0.5)

    # 2. è¨ˆç®—å‡¦ç†
    # æ–‡å­—åˆ—å¤‰æ›ã¯ä¸è¦ã§ã™ï¼ˆst.number_inputã¯æœ€åˆã‹ã‚‰æ•°å€¤ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ï¼‰
    
    b = 50.0 - a    # ãƒ˜ã‚­ã‚µãƒ•ãƒ«ã‚ªãƒ­ã‚¨ã‚¿ãƒ³ã®æµé‡è¨ˆç®—
    
    c = 1.40    # Arã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼å€¤
    d = 0.75    # ãƒ¡ã‚¿ãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼å€¤
    e = 0.25    # ãƒ˜ã‚­ã‚µãƒ•ãƒ«ã‚ªãƒ­ã‚¨ã‚¿ãƒ³ã®ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼å€¤
    
    f = a * c / d   # ãƒ¡ã‚¿ãƒ³ã®è¨­å®šå€¤è¨ˆç®—
    g = b * c / e   # ãƒ˜ã‚­ã‚µãƒ•ãƒ«ã‚ªãƒ­ã‚¨ã‚¿ãƒ³ã®è¨­å®šå€¤è¨ˆç®—
    
    # 3. çµæœè¡¨ç¤º (st.metricã§ã‹ã£ã“ã‚ˆãè¡¨ç¤º)
    st.markdown("##### ğŸ“ è£…ç½®ã¸ã®è¨­å®šå€¤ (Display Value)")
    
    col1, col2 = st.columns(2)
    
    with col1:
        # print("ãƒ¡ã‚¿ãƒ³ã®è¨­å®šå€¤ã¯" + str(f)) ã®ä»£ã‚ã‚Š
        st.metric(label="CH4 è¨­å®šå€¤", value=f"{f:.2f}")
        st.caption(f"å®Ÿæµé‡: {a} sccm")
        
    with col2:
        # print("ãƒ˜ã‚­ã‚µãƒ•ãƒ«ã‚ªãƒ­ã‚¨ã‚¿ãƒ³ã®è¨­å®šå€¤ã¯" + str(g)) ã®ä»£ã‚ã‚Š
        st.metric(label="C2F6 è¨­å®šå€¤", value=f"{g:.2f}")
        st.caption(f"å®Ÿæµé‡: {b} sccm (Total 50)")

st.divider()
st.info("ğŸ‘ˆ å·¦ã®ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã‚‚å„ãƒ„ãƒ¼ãƒ«ã¸ç§»å‹•ã§ãã¾ã™")
